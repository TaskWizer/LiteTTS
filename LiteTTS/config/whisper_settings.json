{
  "whisper": {
    "default_model": "distil-small.en",
    "implementation": "faster-whisper",
    "quantization": "int8",
    "cpu_threads": 4,
    "device": "cpu",
    "fallback_model": "openai-whisper-base",
    "model_cache_dir": "./models/whisper_cache",
    "beam_size": 5,
    "language": "en",
    "condition_on_previous_text": false,
    "enable_fallback": true,
    "download_timeout": 300,
    "model_variants": {
      "distil-small.en": {
        "size_mb": 244,
        "parameters": "39M",
        "languages": ["en"],
        "expected_rtf": {
          "raspberry_pi_4": 0.5,
          "intel_atom_n5105": 0.4,
          "snapdragon_660": 0.6
        },
        "memory_usage_mb": 1000,
        "accuracy_wer_degradation": 0.03
      },
      "distil-medium.en": {
        "size_mb": 769,
        "parameters": "84M",
        "languages": ["en"],
        "expected_rtf": {
          "raspberry_pi_4": 0.8,
          "intel_atom_n5105": 0.6,
          "snapdragon_660": 0.9
        },
        "memory_usage_mb": 1800,
        "accuracy_wer_degradation": 0.02
      },
      "base": {
        "size_mb": 74,
        "parameters": "74M",
        "languages": ["multilingual"],
        "expected_rtf": {
          "raspberry_pi_4": 0.7,
          "intel_atom_n5105": 0.5,
          "snapdragon_660": 0.8
        },
        "memory_usage_mb": 800,
        "accuracy_wer_degradation": 0.05
      },
      "tiny": {
        "size_mb": 39,
        "parameters": "39M",
        "languages": ["multilingual"],
        "expected_rtf": {
          "raspberry_pi_4": 0.3,
          "intel_atom_n5105": 0.2,
          "snapdragon_660": 0.4
        },
        "memory_usage_mb": 500,
        "accuracy_wer_degradation": 0.15
      }
    }
  },
  "voice_cloning": {
    "max_audio_duration": 120.0,
    "max_segment_duration": 30.0,
    "segment_overlap": 2.0,
    "max_reference_clips": 5,
    "max_total_duration": 600.0,
    "enable_segmentation": true,
    "quality_threshold": 0.7,
    "enable_enhanced_mode": true,
    "audio_preprocessing": {
      "normalize_audio": true,
      "remove_silence": true,
      "noise_reduction": true,
      "target_sample_rate": 24000,
      "target_bit_depth": 16
    },
    "segmentation": {
      "voice_activity_detection": true,
      "optimal_cut_points": true,
      "fade_duration_ms": 50,
      "min_segment_duration": 5.0,
      "max_gap_duration": 1.0
    },
    "quality_analysis": {
      "enable_spectral_analysis": true,
      "enable_temporal_analysis": true,
      "enable_prosody_analysis": true,
      "min_snr_db": 20,
      "max_noise_floor_db": -40
    }
  },
  "performance_monitoring": {
    "enable_monitoring": true,
    "rtf_threshold": 1.0,
    "memory_threshold_mb": 2000,
    "cpu_threshold_percent": 85,
    "log_performance_metrics": true,
    "metrics_retention_days": 30,
    "alert_thresholds": {
      "rtf_warning": 0.8,
      "rtf_critical": 1.2,
      "memory_warning_mb": 1500,
      "memory_critical_mb": 2500,
      "cpu_warning_percent": 75,
      "cpu_critical_percent": 90,
      "error_rate_warning": 0.02,
      "error_rate_critical": 0.05
    },
    "monitoring_intervals": {
      "metrics_collection_ms": 100,
      "performance_report_minutes": 5,
      "health_check_minutes": 1
    }
  },
  "filesystem_monitoring": {
    "enable_realtime": true,
    "detection_latency_ms": 1000,
    "scan_interval_seconds": 60,
    "watch_voice_directory": true,
    "debounce_time_ms": 1000,
    "file_extensions": [".bin", ".npz", ".wav", ".mp3"],
    "metadata_extensions": [".json", ".yaml", ".yml"],
    "auto_index": true,
    "backup_metadata": true
  },
  "edge_hardware": {
    "auto_detect": true,
    "optimization_profiles": {
      "raspberry_pi_4": {
        "cpu_threads": 4,
        "memory_limit_mb": 1500,
        "preferred_models": ["distil-small.en", "tiny"],
        "quantization": "int8",
        "batch_size": 1,
        "enable_thermal_throttling": true
      },
      "intel_atom_n5105": {
        "cpu_threads": 4,
        "memory_limit_mb": 2000,
        "preferred_models": ["distil-small.en", "base"],
        "quantization": "int8",
        "batch_size": 1,
        "enable_avx2": true
      },
      "snapdragon_660": {
        "cpu_threads": 8,
        "memory_limit_mb": 1800,
        "preferred_models": ["distil-small.en", "base"],
        "quantization": "int8",
        "batch_size": 1,
        "enable_neon": true
      },
      "generic_low_power": {
        "cpu_threads": 2,
        "memory_limit_mb": 1000,
        "preferred_models": ["tiny"],
        "quantization": "int8",
        "batch_size": 1,
        "conservative_mode": true
      }
    }
  },
  "fallback_strategy": {
    "enable_fallback": true,
    "fallback_chain": [
      {
        "implementation": "faster-whisper",
        "model": "distil-small.en",
        "compute_type": "int8"
      },
      {
        "implementation": "faster-whisper",
        "model": "base",
        "compute_type": "int8"
      },
      {
        "implementation": "openai-whisper",
        "model": "base"
      },
      {
        "implementation": "openai-whisper",
        "model": "tiny"
      }
    ],
    "fallback_triggers": {
      "rtf_threshold": 1.5,
      "memory_threshold_mb": 2500,
      "error_rate_threshold": 0.1,
      "timeout_seconds": 30
    },
    "retry_policy": {
      "max_retries": 2,
      "retry_delay_seconds": 1,
      "exponential_backoff": true
    }
  },
  "environment_variables": {
    "WHISPER_MODEL": {
      "description": "Override default Whisper model",
      "default": "distil-small.en",
      "config_path": "whisper.default_model"
    },
    "WHISPER_CPU_THREADS": {
      "description": "Number of CPU threads for Whisper inference",
      "default": 4,
      "config_path": "whisper.cpu_threads"
    },
    "WHISPER_COMPUTE_TYPE": {
      "description": "Quantization type (int8, int4, float16, float32)",
      "default": "int8",
      "config_path": "whisper.quantization"
    },
    "WHISPER_CACHE_DIR": {
      "description": "Directory for caching Whisper models",
      "default": "./models/whisper_cache",
      "config_path": "whisper.model_cache_dir"
    },
    "VOICE_CLONING_MAX_DURATION": {
      "description": "Maximum audio duration for voice cloning (seconds)",
      "default": 120.0,
      "config_path": "voice_cloning.max_audio_duration"
    },
    "ENABLE_PERFORMANCE_MONITORING": {
      "description": "Enable performance monitoring and metrics collection",
      "default": true,
      "config_path": "performance_monitoring.enable_monitoring"
    },
    "RTF_THRESHOLD": {
      "description": "Real-time factor threshold for performance alerts",
      "default": 1.0,
      "config_path": "performance_monitoring.rtf_threshold"
    },
    "MEMORY_THRESHOLD_MB": {
      "description": "Memory usage threshold in MB for performance alerts",
      "default": 2000,
      "config_path": "performance_monitoring.memory_threshold_mb"
    },
    "ENABLE_FILESYSTEM_MONITORING": {
      "description": "Enable real-time filesystem monitoring for voice files",
      "default": true,
      "config_path": "filesystem_monitoring.enable_realtime"
    },
    "EDGE_HARDWARE_PROFILE": {
      "description": "Edge hardware optimization profile (auto, raspberry_pi_4, intel_atom_n5105, snapdragon_660, generic_low_power)",
      "default": "auto",
      "config_path": "edge_hardware.optimization_profiles"
    }
  },
  "logging": {
    "whisper_logger": "LiteTTS.backends.whisper_optimized",
    "voice_cloning_logger": "LiteTTS.voice.enhanced_cloning",
    "performance_logger": "LiteTTS.monitoring.performance",
    "filesystem_logger": "LiteTTS.voice.filesystem_integration",
    "log_levels": {
      "whisper_performance": "INFO",
      "model_loading": "INFO",
      "fallback_events": "WARNING",
      "performance_alerts": "WARNING",
      "filesystem_events": "INFO"
    },
    "log_format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    "performance_log_file": "logs/whisper_performance.log",
    "error_log_file": "logs/whisper_errors.log"
  },
  "testing": {
    "test_audio_samples": {
      "short_sample": "tests/audio/test_5s.wav",
      "medium_sample": "tests/audio/test_15s.wav",
      "long_sample": "tests/audio/test_30s.wav",
      "extended_sample": "tests/audio/test_120s.wav"
    },
    "performance_benchmarks": {
      "target_rtf": 1.0,
      "target_memory_mb": 2000,
      "target_accuracy_wer": 0.05,
      "min_throughput_samples_per_hour": 100
    },
    "quality_thresholds": {
      "min_transcription_accuracy": 0.95,
      "max_word_error_rate": 0.05,
      "min_confidence_score": 0.8
    }
  },
  "version": "1.0.0",
  "last_updated": "2025-01-18",
  "schema_version": "1.0"
}
